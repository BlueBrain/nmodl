<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>User Guide: nmodl::codegen::utils Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_nmodl.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">User Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('namespacenmodl_1_1codegen_1_1utils.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">nmodl::codegen::utils Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ad7f64bb2383682a662311a40a6a96a25"><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr class="memitem:ad7f64bb2383682a662311a40a6a96a25"><td class="memTemplItemLeft" align="right" valign="top">std::string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#ad7f64bb2383682a662311a40a6a96a25">format_double_string&lt; CodegenCVisitor &gt;</a> (const std::string &amp;s_value)</td></tr>
<tr class="separator:ad7f64bb2383682a662311a40a6a96a25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fa2745b0f28ad56c202031703c2fc33"><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr class="memitem:a5fa2745b0f28ad56c202031703c2fc33"><td class="memTemplItemLeft" align="right" valign="top">std::string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#a5fa2745b0f28ad56c202031703c2fc33">format_double_string&lt; CodegenIspcVisitor &gt;</a> (const std::string &amp;s_value)</td></tr>
<tr class="separator:a5fa2745b0f28ad56c202031703c2fc33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a05545df87abde7bd9c140c1c4d5d42"><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr class="memitem:a8a05545df87abde7bd9c140c1c4d5d42"><td class="memTemplItemLeft" align="right" valign="top">std::string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#a8a05545df87abde7bd9c140c1c4d5d42">format_float_string&lt; CodegenCVisitor &gt;</a> (const std::string &amp;s_value)</td></tr>
<tr class="separator:a8a05545df87abde7bd9c140c1c4d5d42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37264733af5e0a57c9dfbc5818fcd4d0"><td class="memTemplParams" colspan="2">template&lt;&gt; </td></tr>
<tr class="memitem:a37264733af5e0a57c9dfbc5818fcd4d0"><td class="memTemplItemLeft" align="right" valign="top">std::string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#a37264733af5e0a57c9dfbc5818fcd4d0">format_float_string&lt; CodegenIspcVisitor &gt;</a> (const std::string &amp;s_value)</td></tr>
<tr class="separator:a37264733af5e0a57c9dfbc5818fcd4d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa632f88f428f21e6befeab48d9401997"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:aa632f88f428f21e6befeab48d9401997"><td class="memTemplItemLeft" align="right" valign="top">std::string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#aa632f88f428f21e6befeab48d9401997">format_double_string</a> (const std::string &amp;s_value)</td></tr>
<tr class="memdesc:aa632f88f428f21e6befeab48d9401997"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the double constants format being printed in the generated code.  <a href="#aa632f88f428f21e6befeab48d9401997">More...</a><br /></td></tr>
<tr class="separator:aa632f88f428f21e6befeab48d9401997"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af37aaecb81df71fda4c68e0da90baee8"><td class="memTemplParams" colspan="2">template&lt;typename T &gt; </td></tr>
<tr class="memitem:af37aaecb81df71fda4c68e0da90baee8"><td class="memTemplItemLeft" align="right" valign="top">std::string&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#af37aaecb81df71fda4c68e0da90baee8">format_float_string</a> (const std::string &amp;s_value)</td></tr>
<tr class="memdesc:af37aaecb81df71fda4c68e0da90baee8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles the float constants format being printed in the generated code.  <a href="#af37aaecb81df71fda4c68e0da90baee8">More...</a><br /></td></tr>
<tr class="separator:af37aaecb81df71fda4c68e0da90baee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="aa632f88f428f21e6befeab48d9401997"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa632f88f428f21e6befeab48d9401997">&#9670;&nbsp;</a></span>format_double_string()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string nmodl::codegen::utils::format_double_string </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the double constants format being printed in the generated code. </p>
<p>It takes care of printing the values with the correct floating point precision for each backend, similar to mod2c and Neuron. This function can be called using as template <code><a class="el" href="classnmodl_1_1codegen_1_1_codegen_c_visitor.html" title="Visitor for printing C code compatible with legacy api of CoreNEURON ">CodegenCVisitor</a></code> or <code><a class="el" href="classnmodl_1_1codegen_1_1_codegen_ispc_visitor.html" title="Visitor for printing C code with ISPC backend ">CodegenIspcVisitor</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s_value</td><td>The double constant as string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The proper string to be printed in the generated file. </dd></dl>

</div>
</div>
<a id="ad7f64bb2383682a662311a40a6a96a25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7f64bb2383682a662311a40a6a96a25">&#9670;&nbsp;</a></span>format_double_string< CodegenCVisitor >()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#aa632f88f428f21e6befeab48d9401997">nmodl::codegen::utils::format_double_string</a>&lt; <a class="el" href="classnmodl_1_1codegen_1_1_codegen_c_visitor.html">CodegenCVisitor</a> &gt; </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>We can directly print value but if user specify value as integer then then it gets printed as an integer. To avoid this, we use below wrapper. If user has provided integer then it gets printed as 1.0 (similar to mod2c and neuron where ".0" is appended). Otherwise we print double variables as they are represented in the mod file by user. If the value is in scientific representation (1e+20, 1E-15) then keep it as it is. </p>

<p class="definition">Definition at line <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html#l00025">25</a> of file <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html">codegen_utils.cpp</a>.</p>

</div>
</div>
<a id="a5fa2745b0f28ad56c202031703c2fc33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fa2745b0f28ad56c202031703c2fc33">&#9670;&nbsp;</a></span>format_double_string< CodegenIspcVisitor >()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#aa632f88f428f21e6befeab48d9401997">nmodl::codegen::utils::format_double_string</a>&lt; <a class="el" href="classnmodl_1_1codegen_1_1_codegen_ispc_visitor.html">CodegenIspcVisitor</a> &gt; </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>In ISPC we have to explicitly append <code>d</code> to a floating point number otherwise it is treated as float. A value stored in the AST can be in scientific notation and hence we can't just append <code>d</code> to the string. Hence, we have to transform the value into the ISPC compliant format by replacing <code>e</code> and <code>E</code> with <code>d</code> to keep the same representation of the number as in the cpp backend. </p>

<p class="definition">Definition at line <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html#l00043">43</a> of file <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html">codegen_utils.cpp</a>.</p>

</div>
</div>
<a id="af37aaecb81df71fda4c68e0da90baee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af37aaecb81df71fda4c68e0da90baee8">&#9670;&nbsp;</a></span>format_float_string()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string nmodl::codegen::utils::format_float_string </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Handles the float constants format being printed in the generated code. </p>
<p>It takes care of printing the values with the correct floating point precision for each backend, similar to mod2c and Neuron. This function can be called using as template <code><a class="el" href="classnmodl_1_1codegen_1_1_codegen_c_visitor.html" title="Visitor for printing C code compatible with legacy api of CoreNEURON ">CodegenCVisitor</a></code> or <code><a class="el" href="classnmodl_1_1codegen_1_1_codegen_ispc_visitor.html" title="Visitor for printing C code with ISPC backend ">CodegenIspcVisitor</a></code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s_value</td><td>The double constant as string </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The proper string to be printed in the generated file. </dd></dl>

</div>
</div>
<a id="a8a05545df87abde7bd9c140c1c4d5d42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a05545df87abde7bd9c140c1c4d5d42">&#9670;&nbsp;</a></span>format_float_string< CodegenCVisitor >()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#af37aaecb81df71fda4c68e0da90baee8">nmodl::codegen::utils::format_float_string</a>&lt; <a class="el" href="classnmodl_1_1codegen_1_1_codegen_c_visitor.html">CodegenCVisitor</a> &gt; </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html#l00060">60</a> of file <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html">codegen_utils.cpp</a>.</p>

</div>
</div>
<a id="a37264733af5e0a57c9dfbc5818fcd4d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37264733af5e0a57c9dfbc5818fcd4d0">&#9670;&nbsp;</a></span>format_float_string< CodegenIspcVisitor >()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">std::string <a class="el" href="namespacenmodl_1_1codegen_1_1utils.html#af37aaecb81df71fda4c68e0da90baee8">nmodl::codegen::utils::format_float_string</a>&lt; <a class="el" href="classnmodl_1_1codegen_1_1_codegen_ispc_visitor.html">CodegenIspcVisitor</a> &gt; </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>s_value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>For float variables we don't have to do the conversion with changing <code>e</code> and <code>E</code> with <code>f</code>, since the scientific notation numbers are already parsed as floats by ISPC. Instead we need to take care of only appending <code>f</code> to the end of floating point numbers, which is optional on ISPC. </p>

<p class="definition">Definition at line <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html#l00076">76</a> of file <a class="el" href="src_2codegen_2codegen__utils_8cpp_source.html">codegen_utils.cpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.15-->
<!-- start footer part -->
<div id="nav-path" class="navpath">
  <ul>
    <li class="navelem"><a class="el" href="namespacenmodl.html">nmodl</a></li><li class="navelem"><a class="el" href="namespacenmodl_1_1codegen.html">codegen</a></li><li class="navelem"><a class="el" href="namespacenmodl_1_1codegen_1_1utils.html">utils</a></li>
  </ul>
</div>
<hr class="footer"/>
<address class="footer">
    <small>
    </small>
</address>
<!--END !GENERATE_TREEVIEW-->
</body>
</html>
